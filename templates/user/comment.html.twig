{% extends 'base.html.twig' %}

{% block title %}Articles commentés{% endblock %}

{% block body %}
    <h1 class="text-center mb-4">Articles commentés</h1>

    {% include "user/_menu.html.twig" %}

    {% for comment in articles %}
        <div class="card mb-3">
            <div class="card-body">
                <a href="{{ path('article_show', {'id': comment.article.id}) }}" class="card-link" tabindex="0">
                    <h2 class="card-title">{{ comment.article.title }}</h2>
                    <h6 class="text-muted">Catégorie : {{ comment.article.category.name }}</h6>
                </a>
            </div>
            
            {% if comment.article.image %}
                <img src="{{ asset('/uploads/' ~ article.image.name) }}" alt="" height="200"/>
            {% else %}
                <svg xmlns="http://www.w3.org/2000/svg" class="d-block user-select-none" width="100%" height="200" aria-label="Placeholder: Image cap" focusable="false" role="img" preserveAspectRatio="xMidYMid slice" viewBox="0 0 318 180" style="font-size:1.125rem;text-anchor:middle">
                    <rect width="100%" height="100%" fill="#868e96"></rect>
                    <text x="50%" y="50%" fill="#dee2e6" dy=".3em">Pas d'image</text>
                </svg>
            {% endif %}

            <div class="card-body">
                <p class="card-text">{{ comment.article.content|slice(0,20) ~ '...' }}</p>
            </div>
            <hr>
            <div class="container">
                <h5><u>Votre commentaire :</u></h5>
                <h6>{{ comment.content }}</h6>
            </div>
            <div class="card-footer text-muted">
                Le {{ comment.article.createAt ? comment.article.createAt|date('d-m-Y') : '' }} par {{ comment.article.user.author}}.
            </div>
        </div>
    {% else %}
        <h6>Aucun article disponible :(</h6>
    {% endfor %}
    <div class="text-center d-flex justify-content-center">
        {{ knp_pagination_render(articles) }}
    </div>

{% endblock %}